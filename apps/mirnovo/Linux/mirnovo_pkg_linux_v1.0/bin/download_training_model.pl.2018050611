#!/usr/bin/perl

use strict;
use warnings;

if(@ARGV == 0){
    print "[error] Please provide a training model identifier: ./download_training_model.pl model_id\nThe list of all supported model identifiers can be found at misc/training_models.txt\n\n";
}

my $model = $ARGV[0];

my %supported_models = ();
open(FH, "../misc/training_models.txt");
while(<FH>){
    chomp;
    if($_ !~ /^#/){
        $supported_models{ $_ } = 1;
    }
}
close(FH);

if(!defined( $supported_models{ $model } )){
    die "[error] Please provide a valid model identifier.\nThe list of all supported model identifiers can be found at misc/training_models.txt\n\n";
}

my $url = "http://wwwdev.ebi.ac.uk/enright-dev/mirnovo-standalone-pkg/Training-Models-1.0/$model.zip";
`cd ml_predictor/trained_models; wget $url; unzip $model.zip; mv $model/*.rds . && rm -f $model.zip && rm -rf $model;`;

print "[done] '$model' training model was installed succesfully.\n\n";
